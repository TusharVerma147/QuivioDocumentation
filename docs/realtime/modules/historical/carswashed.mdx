
# Cars Washed

The Cars Washed  in the Historical Screen is designed to provide detailed insights into the total number of cars washed over a specified period. It combines visual data representation with tabular analysis to help users evaluate car wash performance effectively.

<figure> <img src="/img/inventory/carwashed.png" alt="This is an example image  of Car Washed" width="300" height="600" /></figure>

## Overview

The Cars Washed component allows users to:

- View the total number of cars washed.
- Analyze trends using charts and visualizations.
- Filter data by custom date ranges.
- Refresh data dynamically via pull-to-refresh functionality.

## Key Features

- **Total Cars Washed**:  Displays the aggregate count of cars washed for the selected date range.
- **Chart Representation**: Presents data in a bar or line chart format for better visualization of trends.
- **Custom Date Filters**: Enables users to select and analyze data for specific date ranges.

## Code Structure

### State Management

The Cars Washed component uses the following state:

```javascript
const initialState = {
  carsWashedData: [],
  startDate: '',
  endDate: '',
  isLoading: false,
};
const [state, updateState] = useSimpleReducer(initialState);
```

### Event Handlers

- **handleDateChange**: Updates the date range and fetches data accordingly.
- **handleRefresh**: Reloads the data for cars washed when the user performs a pull-to-refresh gesture.

### API Integration

- **getCarsWashedDataAPI**: Fetches historical data for the total cars washed based on the selected date range.

**Car Washed Data**:
```javascript
curl -X GET "https://checkpointqa-api.quivio.com/historical/tabs?type=2&siteId=1&startDate=2025-02-02&endDate=2025-02-08" \
-H "Accept: application/json, text/plain, */*" \
-H "Content-Type: application/json" \
-H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjk5NDM5NiwidXNlck5hbWUiOiJkZXYxIiwiZGV2aWNlSWQiOiI2MTNlY2UxYi1jNTIyLTRhNzktYTA4YS04NGY1YmUxNzIxYWIiLCJzdWJkb21haW5fcXVhbGlmaWVyIjoicGFwYWJlYXIiLCJpYXQiOjE3Mzg2NjA3NTcsImV4cCI6MTc0MTI1Mjc1N30.cknoFbiY-PPHdXtsLtZzEp0OY3olmZwpCkcrsxPhsBU" \
-H "timezone: -300" \
-H "deviceid: 613ece1b-c522-4a79-a08a-84f5be1721ab"
```

**Response**:
```javascript
{
    "statusCode": 200,
    "message": "Success.",
    "data": {
        "isOpen": 0,
        "totalSales": {
            "title": "Total Sales",
            "value": 9240
        },
        "extraSales": {
            "title": "Non-wash Sales",
            "value": 0
        },
        "graphData": [
            {
                "date": "2025-02-02",
                "value": 804
            },
            {
                "date": "2025-02-03",
                "value": 732
            },
            {
                "date": "2025-02-04",
                "value": 0
            },
            {
                "date": "2025-02-05",
                "value": 0
            },
            {
                "date": "2025-02-06",
                "value": 0
            },
            {
                "date": "2025-02-07",
                "value": 0
            },
            {
                "date": "2025-02-08",
                "value": 0
            }
        ]
    }
}
```

## Analytics

Logs events for API call successes and failures using AnalyticsService:

```javascript
AnalyticsService.logEvent(EVENTS.CARS_WASHED_DATA_SUCCESS);
AnalyticsService.logEvent(EVENTS.CARS_WASHED_DATA_FAILED, { error: error?.message });
```

## Navigation

The Cars Washed component is accessible via the tab-based navigation in the Historical Screen.






